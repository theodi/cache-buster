language: ruby
cache: bundler
rvm:
- 2.1.4
before_install: gem install bundler -v 1.11.2
env:
  global:
  - secure: jYUX3kuylRyISFwsqZKIdh8eXxxmfVvcMKV3CuMqaeYWmK9FidqpJRiz8ZJLvrXNCLcW4zfEbSuC4C4snActTLB1mnAeqZVKoZRaIJo6qL0nnmlPpiQrnm3NHmPWa0Fqf/2+6PBRY42BSMABqfl1v3MD0FjdReiE88Dwuz46fctH4Pw/BvF4CLofPKZXLcc9XC7ywXGdxzHlvJm9FIezZ3mS5HB3CfA+0sJ7QGLW7dVvCkVrQmYpBp7RGRYx0tBaDz99ThY0icrvDyAZ/heVJvQ3arTUNF8bMySWvq8sW3mHLk/ng9QcTcm6cD8zE2aGzt1DY79q7G820YP65N1BCXHqzyCJGojOEfALlLuKfXko/DfDPgIgy9tExQrPMHwoLD9UFAPq1g1iG4Uo0tjIMOcivzwUPnB2Q2wZ6ai54YpsnHfnKRsG3I3j18CBHX5f3VjQTkVnZKvb0P3RyH8zHI8zaHvMFDEZ/1oebPQ7NZnQ84nbHNGRD/okCoFN9afsG8Cyv2goO5iPiilkvjYUa8E0hvxIsmuDD9Osl2nCAZljpZQ+CXp5Ij8+LR1n1rlVNUd9tyk+FInRiV9fYVDy3R+8jF81AzqOjjO/XrptYrPc3XTKm6KwiM/hLEJBmwr57AmHWk+q8fzFJ0/JO7Sx70Vag8JzmuaZf2B/zcmwJFk=
  - secure: kpvRpID8gMxP5lFxQT2ePd6C5RCrSM3ZllpOXAjcGM20v4KIihy0gdhTNSjk2X8wcXfJDsgtouHgDSvaS5/Huno4DOu5vmc8XITcKwVfq8k8YGf4ouHX9sPMJH+mCGT8bGTaBlhySte7FqfPiSHoDnle94FG1OBUH8QLjUJpVI5ClStqJiT4KQ3LB++nLth77AaAXYQEBcNOZfii/actzu/B6jd+sMVq6WuU796qt+IY2taDwmzkyyNsmPPWqdBinAuBlN0P/ArkzYqLmDyMzo8ygfjyS15/9XrE0KdU+ULWXGR8FOSfc5AEK4QUMpp9qUAj2xgpM4RfgfD5ZhlNeo8MVjMHpCwmfylgLBFIJlZYcYyGMbWMs8Ish0xyK9i7XtYbw5UlMxoI8ZiTDh1vKMY+qJONkFLC0aSWW7FkSjOXi1D8fO+iwlXICDWKu6xkchxCFAnW/SHbTXydkBrnLY5JTPjlOX5IGBiJUk5+gXpVpe6j7XCSZPONwCPre2nDwMbApu//sWZ3Tf73xqfZAENaXSSvT6hiiSDZVxzh9RtfdTaRq+F9xVwg9NbU2/tzwr1ysWDQu2Cf0Ues1CEzKLqB5o+5Zch1ybWY79uDAewXgPhTEIrHAXomoLmtWBaYjv9a6NZGw0ccs0k6FfHrSwYDsYhZXL8zz8k3+DQAg/o=
  - secure: MjUeyUM4b9ko9w0IjDKBQi4LjRSk7jOpaTYZfe6D9KFkoRIQ9igt/30diZGJHRGiyTXdmlZJbVtrAvqvDAWpX89ljJNlGu7U6enCOggdt6qtLg/7JA415eFzMgd0wBD/g88kGYDojWkLkudqMG4XMK/RVzPXzs39zz4gnRRIWVwDR6EQQM292CQKsOZrOiu+XgLJoL2YdWi6K4iwc2x4E3P/4okTTKauH8+pObFirqV6PGGvOvkgTdmdXZ/qE9ljhSn7yWSBXGilzIOkYxSkZvKYBBImm9glwCHiGAuX5p/jL8vbAyTyy8Zr2/5R47yEWIl1ffHGCYrz7rCvz2iEd6yweKoqkHDKJHWD1Bt0GfR7vs5ke/boH7hHKALAk7ejhXy977cvFeMvwaYWTpyHwKQUAP2DZTbfA9CIDHOZMjPQpqHqWt+vcjwpbaDIRe03xZjjz2Kks0jguirz/N5lfHD85CRftrK45FVQTONrcxdMoUPqk9p0scq2iY/cy/h/eQ98a5BejadwethXAIsg/xvBZHv0XtED47UOPPVfJY5nuffZoV7pQNoyDSCKIitQfWS67Fqg5gJA74BwtEoVB+CVFY5CI80XeMRavrDx5inZ3MHnH8IRqSXpkdyxn0d75eJBMew/pn3Fg5BaG9Js9nlRNAFoPO2DySf0rLr71Wk=
  - secure: TIGzLbjCczK4m1gi5LGzO+fVMSfHO/67XhJsrWyvzEusBvI0b279NUoemMLYvn/jVhG3VIpywDHFvTdP7a8ubOrtHzUxqHRsNtpX2NSiRacCsJRRiuLJSeGww0eCUbNaFtyllErTi08JyjjWtj4cyTfLInHVyiJ4asNekHD78FdZF9WDXC93FrlqzFRy9HZupHUOqr7D7Bn6/VR0eQgV2uwyFTJCLB8/kfj2Kr7eDDHd1vvnuYd/ECiGncOnZk4Fu5pqAmVjc2l1r0CSCx8G4eRkjQ1OtbkzGR4iID87RytU4lm4mq8+027pjHPlnVYvZJFIs3Z/2++xRhZ5YfP4Uw1+5GbRNHfBW6lk8igb6HM8DCtsvgaU1FZ5ePElHSTOhtxhaTIa7SIo6YPlFPrwGsiED6kIpPlQLs6SvRkeWgrCMXZEf1+lFK4sno10WQSrBkrBxSGvf4ulMpSok47RwfuyTQdlPj45oH0mtgsQwC8s8dRRDuB4c9Soonx/R5Z11674o7ExKFWwI+6NiuFsQ38iZugclSsR6WKg1qR1uqVr/KPX9hYdRljUVKbHgE3Lljk7ycigdKsDYp7pjcN6ux9UvLkIM6IJ9VavsricFkubW0NuoUW4MePLymKlwYbLyUCVaGB3msbAdpfgD6ETXrt8yaOgq4BEhBQ6dhn8Wok=
  - secure: KKYkR23TwiZeLWVXBJ81vrp85XOWDWXVD1xbl/jPcjEGApvb7NGp7pGeQPABV6CvFYyipzsOrFe9IXaz5r0+Mf8qNeJdCig2KAxrF6cGdluTGkhkzmUeNVEzynqfinTGGxWSUVPVZOkM1J4iAOuT7k1pM+1K8+Vix8MXu4NJf3ywEzu3UCOza6uRfwhiuTPpju5iT164WLS0kMMavVKLiOB0WJApvCon2UGVO2HCpvxNzPPjQjPweILDQjkBRPXYPs3z7eM8xwJ34RsuCwD9RfUs2cTb5jl+PQQuxtzraMBLN434VDSaUuEOc4OGzwcMS5FWJSSkc3J0Qzuh0oIsubANYALQ8YOHwpVDXjG9R4SZvHse6KFdyZyyIVLj4ng+BA0+pnyas8UtO3D+0Nce45BV9inxQcsLywVV2yO6xkFek1qIgsKa0O0GbK2PBllTGtvBpPIjK1iZ8ncCosQpWJgjj7w/OYT9lYiLpIOwmaCIlAoKT2jwXlDfUOF/svln9QK9GKGzCkcq8tmVgKVrRRsLjlSTDKGTS3AQArND25zQHfeVsHaCs/fJLWNE+nngnZ8QAGiRUaWUskO7c9+P43djE5cfOYnCq2LHDliR3MgKBlZUyMkl5mjzLfsPQHtmbVNsat97dFM/gGW1GZTTAJ10qOD9WEVDGJex6PM1Efo=
  - RED_PIN=23
  - GREEN_PIN=24
  - SOFT_BUTTON=16
  - HARD_BUTTON=17
  - secure: arO3AsHzrdkFab9DvDsPA2k+vXLVqn/8MesrGTAqN8OQTNb/Roo2qQKJ6Z8IV57Ga7k/AOXfJLh/7CHGnFwH4tw+4TTCdwZ7alD0PsrTjIpIXXK7NjFrmt2q9mV6nJE+c7BpCTyFXmsF8RSJ7pOviFBVSn41BRjnoMgxNZtV7W9Zk54yaQsV9jutU84RqogCBUamm+CgC11kqYfjK62xvio+Myusse1xDX49T3hbcznvu6tCfaK1LofMH7/YsQsZvcuyxqfT4cbYfbWTqXaTlDTFmX0ikaHsaQI7JnD61oKL6AAyaAUxHfl1715l/NPYiCfNuk3oiasTvHE/QYbW1qYO9Zl/ee7Cz6McsFimgRKEk33i+ibwgu4T6mvG20zO9PO42OrSGQjOu9yrNzeB3qOcYKkJE1rPSDO34vUuZj2+Hnwzfbw+3NmYdJl5r8H6OWjLIGzJrJ6KwkuxnNTbnL1Nywggg2oj3fxGRH2W1suEEfN56MP45YXladx48/USbtXd+q/WqKq3MFcp6AtfLl5VwPvMuLIwJJ+EEEz1fl3bS1xwdRSfKoROjbUodfIQBruhWOXH+G2DS0DsjyAN+R85CW5kDKPR2niFNNxHkXtExpLoBsJW9/bEz3GvxRVkWPReic0afm6XMY5INFXIg9hpC2IWP4bCa/50yBERk7U=
  - secure: nsJ/8Pzd5EUwdS1WUE/T+E90bNSgcD1twoNmajBnaJnsNJvR0P1kx0C9MnbxpY61tMFfv9gPho6XIuUPs/Xiiknd7gixTz4L+wy7nuFVx5UXFftBZhcSpqJLSfbYeYKI0I5RgabLr+RjcYFTnWlAVP+J4uywEwAULYVRcIS2aVAWhTrWjfhAthbMpXsnRYSfvpkjwCeXV+CnTmhU3wePkxxRpVT/7NTnS7F78kkgPHuJiEKDopdQjBQII+4NBr3f2siyjjAH8mk29lszv19i4CHNl3g76l0yag6TKxPZ5htdAn/8rGdsccIDd1wI7gbLp7HnCDjPk7Blt4U+DvXcBsGvQuQ7zWlIoxXSRbgHht4QOgZgAtJwjHWrLjUZXyFA1MLeBFNLG3MMGoAkKJUAygpEP4eIRfMlp3+S4E0Fy80TKf5pC/Zz6BgPfzOXaYZGKBhKFdZigxMBbyZ2wDYH8tqM7isuc3nATmAxGkhdK7BhGlO0mYWjacJOWaYGGYfYWdGe3SybNRSl5wqVEEiQ0f4rw6kBihuPz7K9sD2d5g8+2cmh1lIbILuz+u3F361tudlSW6iA+giXrCAglpOStuAhBvQ0zVIv4lDZmGe7TL0HqBaMHkOvCc5yfwL+Tx0h6rasIvP0HrDoxet6OfPTnp1C0PvRu+nhhJxyDEUde3w=
  - secure: l0nqWHyyKg8impIU1d7KJpkcLcZq+hO15DvcV2NR3FOGVUWezF7g2FTmWSrqecGcaE8R091WvWT3vaSsqrN2sFrzpJoWYmWUc64NCzZw/fPDyCaZ8IbVl+7AFaY1Ffgigam5H90AXRo+QSZOKzg6rkCWhPTuyvGSuK9V0aiZb2YTg8cv2KZg/bbSoCCdJb79E4771TU1mR/80++pOybaBBPnb4WUgoqLucXXaNF93amgBI+C5xhqfd/O6wOKwDgjamYyLiXIbOfJwW85wXZmvT9Ki6eHE/GuJB/FhqyGVbhaZAvsLcld+yt0UHVNxA5ggofBBRBx2ZhhTWdClXAJuUT4G/15uKbSc5vvaZ/yQf0ZalzHZDm5RE5inBXn8TKd8W5zMZf+XqCfPW9bK0cIBVEgTL+XrBOslGJ09XLWUCD2PlzSpeDK8NSuR6n0/KTJdYG7EuELYksRc29re+CbPsNKZWYejs6PW/JRN2Ck8zFeHvHafD92FQHDyFUjnwoZK4y05gYn0sjZgcUavuUKQNJiShi4H+XsNWago3lra8at0Bm6TSxcdoEd9nV7vbxlbydq7Szc/4bb0PM7aOGlyDFTJdoX/v27A2pNyXrm1DOw3wonLh0N8FJBe+WbPSDkOH35jBTf011Nsyc9ouEcH24/ljPMhxW7pkFgUuH704w=
deploy:
  provider: rubygems
  api_key:
    secure: gzbh51QSje2D5tgSoJN+w1/T1kjEQryZJ6aGOrZ5FgLjroW1gjuwCpWtqym4Te24t1yh4L5PI1Psxb34D0H5rZVL+H8wVzp+QWq4jiLe2G2AJtkAvogbIwRSAwOI1AuUGcee59KnJAhjyJYU/eYXwn5R/sPZOYzMRI9xdoTe5FGHlAycgYhm7PJwMqUTW+bD5NRy1B/+W9mq59rCcXBElD52CB0oQXKzW6N/FIO3Ws4jqsLjwCcQxdCpOl3xzd/hV0tf8g6cb2Yyiqux+3jgbvAuh6h8DTEAm1xbPTpk6ktrRVAUwGIVpI8Kajap9XOZZp8ginR2Q/6/dGeeJeAKhAvnW5QsQsT4iDwwnG+IQMx3g8PkxjwlK50z660rnbE3PIYH+CCQlFHwwGwalbs9ExoSkGjJfaedyWtWJaGE+ZO9iKeOEMjlfZVtWHKwE1+iGzt4pQ4UEi2yap9PAamhrZ9Q9m4J/WN5GiDB9/ue+Uq2lX2mv5uwXn3XpNDBjF6GtQOBbR+3N7lv10QyyoQWu1K2wbyrW/fwCR45x2HciKokdWSmtBFu9Hc+i+AXbC736rsZHA/WtvUinnAEE+6ht2qDflKNA6E+LLwXxQAuYMmRE8gc7sruCeWyCt1qDS0sgUkXODzCW5WM/sWY1VNDY+seJKucf1drP/XpJUBwe4Q=
  gem: cache-buster
  on:
    tags: true
    repo: theodi/cache-buster
after_success:
- export GEM_VERSION=`ruby -e "puts Gem::Specification.load(Dir['*.gemspec'].first).version.to_s"`
- '[ "$TRAVIS_BRANCH" == "master" ] && [ "$TRAVIS_PULL_REQUEST" == "false" ] && curl
  -v -X POST -d ''{"ref":"refs/tags/''$GEM_VERSION''","sha":"''$TRAVIS_COMMIT''"}''  --header
  "Content-Type:application/json" -u $GITHUB_USER:$GITHUB_PASSWORD "https://api.github.com/repos/$TRAVIS_REPO_SLUG/git/refs"'
- '[ "$TRAVIS_BRANCH" == "master" ] && [ "$TRAVIS_PULL_REQUEST" == "false" ]
   gem install github_changelog_generator && github_changelog_generator && git config user.name "Travis CI" &&
   git config user.email "travis@theodi.org" && git checkout master && git add CHANGELOG.md &&
   git commit -m "Updated Changelog [ci skip]" && git push "https://${CHANGELOG_GITHUB_TOKEN}@github.com/theodi/cache-buster" master'
